<!DOCTYPE HTML>
<html>
    <head>
        <title>Ref Manager - simple jsonrpc test</title>
        <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="https://raw.github.com/datagraph/jquery-jsonrpc/master/jquery.jsonrpc.js"></script>
        <script type="text/javascript">
            
            $(document).ready(function() {
             
                $.jsonRPC.setup({
                    endPoint : 'http://localhost:8080',
                    //endPoint : 'http://aime.medialab.sciences-po.fr:8980',
                    namespace : ''
                });
                $("input#echo_button").click(function() {
                    $.jsonRPC.request("echo", {
                        params : [$("input#echo_input").val()],
                        success : function(data) {
                            $("<p />").text(data.result).appendTo($("p#echo_result"));
                        },
                        error : function(data) {
                            alert(JSON.stringify(data));
                        }
                    });
                });
                $("input#metadata_button").click(function() {
                    var my_list = $("input#metadata_input").val().split(",")
                    $.jsonRPC.request("metadata_by_rec_ids", {
                        //params : [["296","579","697"],"json"],
                        params : [my_list,"json"],
                        success : function(data) {
                            $("<p />").text(data.result).appendTo($("pre#metadata_result"));
                        },
                        error : function(data) {
                            alert(JSON.stringify(data));
                        }
                    });
                });
                $("input#citation_button").click(function() {
                    var my_list = $("input#citation_input").val().split(",")
                    $.jsonRPC.request("citation_by_rec_ids", {
                        //params : [["296","579","697"],"json"],
                        params : [my_list,"mla","html"],
                        success : function(data) {
                            $("<p />").text(data.result).appendTo($("p#citation_result"));
                        },
                        error : function(data) {
                            alert(JSON.stringify(data));
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <h1>Ref Manager - simple jsonrpc test</h1>
        <h2>Method echo</h2>
        <p><label for="echo_input">Value</label> : 
            <input type="text" name="echo_input" id="echo_input">
        </p>
        <p>
            <input name="echo_button" id="echo_button" value="Send echo request" type="button" />
        </p>
        <p>Results :</p>
        <p id="echo_result"></p>

        <h2>Method metadata_by_rec_ids</h2>
        <p><label for="metadata_input">List of ref ids</label> : 
            <input type="text" name="metadata_input" id="metadata_input">
            example : 296,579,697
        </p>
        <p>
            <input name="metadata_button" id="metadata_button" value="Send metadata request" type="button" />
        </p>
        <p>Results :</p>
        <pre id="metadata_result"></pre>

        <h2>Method citation_by_rec_ids</h2>
        <p><label for="citation_input">List of ref ids</label> : 
            <input type="text" name="citation_input" id="citation_input">
            example : 296,579,697
        </p>
        <p>
            <input name="citation_button" id="citation_button" value="Send citation request" type="button" />
        </p>
        <p>Results :</p>
        <p id="citation_result"></p>

    </body>
</html>